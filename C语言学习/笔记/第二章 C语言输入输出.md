

# 第二章C语言输入输出

##一、C语言中的标准输入输出函数

###1.1 缓冲区

![](https://typora0-0-1.oss-cn-shenzhen.aliyuncs.com/C/%E5%9B%BE%E7%89%87/%E7%BC%93%E5%86%B2%E5%8C%BA%E7%BB%93%E6%9E%84%E5%9B%BE%E7%89%87.png))

> **1.输入缓冲区**：当我们在键盘上敲击字符时，这些字符首先被存储到输入缓冲区中。当我们按下回  	 车键或者缓冲区满时，存储在缓冲区的数据才会被送入到程序处理。

> **2.输出缓冲区**：当我们在执行一个输出函数（如printf）时，数据首先被放入到输出缓冲区，，直到缓冲区满或者调用刷新缓冲区函数（如fflush）时，才会真正输出到屏幕上。



### 1.2输入\输出函数

>scanf()：此函数⽤于从标准输⼊（键盘）读取并转换。它需要⼀个格式字符串，该字符串确 定了如何读取输⼊。 
>
>getchar()：此函数从标准输⼊读取并返回⼀个字符。 gets()：此函数从指定的流中读取并存储⼀⾏字符。该⾏以空字符终⽌。

>printf()：此函数⽤于在标准输出（显示器）上打印格式化的输出。它需要⼀个格式字符串， 该字符串确定了如何打印变量的值。 
>
>putchar()：此函数将⼀个字符写⼊标准输出。 
>
>puts()：此函数写⼀个字符串和⼀个尾随的换⾏符到标准输出。

### 1.3 scanf print格式化 输入\输出

>scanf
>
>```c
>函数原型： extern int scanf (const char *__restrict __format, ...) __wur;
>函数参数： const char *__restrict __format 输⼊格式	... 多参数 输⼊数据
>返回值： 无
>函数功能： 从标准输⼊设备(键盘)中获取数
>```

> printf
>
> ```c
> 函数原型： printf (const char *__restrict __fmt, ...)
> 函数参数： const char *__restrict __fmt 输出格式	 ... 多参数 输出数据
> 返回值： 没有
> 函数功能： 向标准输出设备（屏幕 终端）中输出数据
> ```

### 1.4 putchar getchar	单字符输入\输出

>putchar
>
>```c
>putchar (int __c)
>{
>	return _IO_putc (__c, stdout);
>}
>函数原型 putchar (int __c)
>函数参数
>int __c 需要输出的字符
>返回值 没有
>函数功能 向标准输出设备（屏幕 终端）中输出数据
>```

> getchar
>
> ```C
> getchar (void)
> {
> 	return _IO_getc (stdin);
> }
> 函数原型 getchar (void)
> 函数参数
> 返回值 return _IO_getc (stdin); 返回从键盘中读取到的⼀个字符
> 函数功能 从标准输⼊设备(键盘)中获取数据
> ```

## 二、C语言中的常量

### 2.1 整数常量

> 整数常量可以是⼗进制、⼋进制或⼗六进制的常量。前缀指定基数：0x 或 0X 表示⼗六进制，0 表示⼋进制， 不带前缀则默认表示⼗进制。 ⼆、C语⾔中的常量 整数常量 5 整数常量也可以带⼀个后缀，后缀是 U 和 L 的组合，U 表示⽆符号整数（unsigned），L 表示⻓整数 （long）。后缀可以是⼤写，也可以是⼩写，U 和 L 的顺序任意。

```C
212 /* 合法的 */
215u /* 合法的 */
0xFeeL /* 合法的 */
078 /* ⾮法的：8 不是⼋进制的数字 */
032UU /* ⾮法的：不能重复后缀 */
85 /* ⼗进制 */
0213 /* ⼋进制 */
0x4b /* ⼗六进制 */
30 /* 整数 */
30u /* ⽆符号整数 */
30l /* ⻓整数 */
30ul /* ⽆符号⻓整数 */
```

### 2.2浮点常量

> 字符常量是括在单引号中，例如，'x' 可以存储在 char 类型的简单变量中。 字符常量可以是⼀个普通的字符（例如 'x'）、⼀个转义序列（例如 '\t'），或⼀个通⽤的字符（例如 '\u02C0'）。 在 C 中，有⼀些特定的字符，当它们前⾯有反斜杠时，它们就具有特殊的含义，被⽤来表示如换⾏符（\n）或 制表符（\t）等。下表列出了⼀些这样的转义序列码：

| 转义列表 | 含义                       |
| -------- | -------------------------- |
| \\\      | \字符                      |
| \\'      | ‘ 字符                     |
| \\"      | ” 字符                     |
| \\?      | ？字符                     |
| \\a      | 报警铃声                   |
| \\b      | 退格键                     |
| \\f      | 换页符                     |
| \n       | 换行符                     |
| \r       | 回车                       |
| \t       | 水平制表符                 |
| \v       | 垂直制表符                 |
| \ooo     | 一到三位的八进制数         |
| \xhh...  | ⼀个或多个数字的⼗六进制数 |

### 2.3 定义常量

>\#define 预处理器 
>
>const 关键字

## 三、C语言中的运算符

| 运算类型       | 运算符                |
| -------------- | --------------------- |
| 算数运算类型   | +，-，*，/，%         |
| 赋值运算类型   | =，+=，-=，*=，/=，%= |
| 关系运算符     | ==，!=，>，<，>=，<=  |
| 逻辑运算符     | &&，\|\|，！          |
| 位运算符       | &，\|，^，~，<<，>>   |
| 自增自减运算符 | ++，--                |
| 逗号运算符     | ，                    |
| 指针运算符     | *，&                  |
| sizeof()运算符 | sizeof                |

### 3.1 算数运算符

```C
#include <stdio.h>
int main() {
    int a = 10;
    int b = 20;
    printf("a + b = %d\n", a + b); // 30
    printf("a - b = %d\n", a - b); // -10
    printf("a * b = %d\n", a * b); // 200
    printf("b / a = %d\n", b / a); // 2
    printf("b %% a = %d\n", b % a); // 0
    return 0;
}

```

### 3.2 赋值运算符

```C
#include <stdio.h>
int main() {
    int a = 10;
    a += 20; // a = a + 20
    printf("a = %d\n", a); // 30
    a -= 5; // a = a - 5
    printf("a = %d\n", a); // 25
    a *= 2; // a = a * 2
    printf("a = %d\n", a); // 50
    a /= 10; // a = a / 10
    printf("a = %d\n", a); // 5
    a %= 3; // a = a % 3
    printf("a = %d\n", a); // 2
    return 0;
}
```

### 3.3 关系运算符

> 关系运算符在C语⾔中⽤于⽐较两个值，结果为⼀个布尔值（0或1）。如果⽐较的条件成⽴，那么 结果为1，否则为0。以下是C语⾔中的关系运算符：

```C
#include <stdio.h>
int main() {
    int a = 10;
    int b = 20;
    printf("a > b: %d\n", a > b); // 0 (false)
    printf("a < b: %d\n", a < b); // 1 (true)
    printf("a >= b: %d\n", a >= b); // 0 (false)
    printf("a <= b: %d\n", a <= b); // 1 (true)
    printf("a == b: %d\n", a == b); // 0 (false)
    printf("a != b: %d\n", a != b); // 1 (true)
    return 0;
}
```

### 3.4 逻辑预算符

>逻辑运算符⽤于链接和操作布尔值（真或假，即1或0）。C语⾔中的逻辑运算符包 括“与”（&&），“或”（||）和“⾮”（！）。以下是这些运算符的解释： 1.逻辑与运算符（&&）：当两边的操作数都为真（⾮零）时，结果才为真。如果任⼀操作数为假 （即零），结果就为假。

```C
int a = 1;
int b = 0;
int result = a || b; // result 的值为 1，因为 a 为⾮零
```

>逻辑或运算符（||）：只要两个操作数中的任⼀操作数为真，结果就为真。只有当两个操作数都 为假，结果才为假。 例如：

```C
int a = 1;
int b = 0;
int result = a || b; // result 的值为 1，因为 a 为⾮零
```

>逻辑⾮运算符（!）：这是⼀个单⽬运算符，对⼀个布尔值进⾏取反操作。如果操作数为真，结 果为假，反之亦然。

```c
int a = 1;
int result = !a; // result 的值为 0，因为 a 为真（⾮零）
```

示例：

```C
#include <stdio.h>
int main() {
    int a = 1;
    int b = 0;
    printf("a && b: %d\n", a && b); // 0 (false)
    printf("a || b: %d\n", a || b); // 1 (true)
    printf("!a: %d\n", !a); // 0 (false)
    printf("!b: %d\n", !b); // 1 (true)
    return 0;
}
```

###3.5 位运算符

>位运算符直接对整数在内存中的⼆进制位进⾏操作。这些运算符包括：按位与(&)、按位或(|)、按 位异或(^)、取反(~)、左移(<<)和右移(>>)。下⾯详细解释每⼀种：

1.按位与运算符（&）：如果两个相应的⼆进制位都为1，则结果为1，否则为0。 

例如：

```C
int a = 60; // 60的⼆进制是 0011 1100
int b = 13; // 13的⼆进制是 0000 1101
int result = a & b; // result 的值为 12，⼆进制为 0000 1100
```

2.按位或运算符（|）：如果两个相应的⼆进制位中⾄少有⼀个1，则结果为1，否则为0。 

例如：

```c
int a = 60; // 60的⼆进制是 0011 1100
int b = 13; // 13的⼆进制是 0000 1101
int result = a | b; // result 的值为 61，⼆进制为 0011 1101
```

3.按位异或运算符（^）：如果两个相应的⼆进制位值相同，则结果为0，否则为1。 

例如：

```c
int a = 60; // 60的⼆进制是 0011 1100
int b = 13; // 13的⼆进制是 0000 1101
int result = a ^ b; // result 的值为 49，⼆进制为 0011 0001
```

4.取反运算符（~）：对数的每⼀位取反，0变1，1变0。 

例如：

```c
int a = 60; // 60的⼆进制是 0011 1100
int result = ~a; // result 的值为 -61，⼆进制为 1100 0011
```

5.左移运算符（<<）：把位向左移动指定的位数，右边⽤0填充。 

例如：

```c
int a = 15; // 15的⼆进制是 0000 1111
int result = a << 2; // result 的值为 60，⼆进制为 0011 1100
```

6.右移运算符（>>）：把位向右移动指定的位数，左边的空位如何填充取决于数字的符号（正数 左边填充0，负数左边填充1）。

例如：

```c
int a = 15; // 15的⼆进制是 0000 1111
int result = a >> 2; // result 的值为 3，⼆进制为 0000 0011
```

实例：

```c
#include <stdio.h>
int main() {
    int a = 60; /* 60 = 0011 1100 */
    int b = 13; /* 13 = 0000 1101 */
    int result;
    result = a & b; /* 12 = 0000 1100 */
    printf("result = a & b: %d\n", result);
    result = a | b; /* 61 = 0011 1101 */
    printf("result = a | b: %d\n", result);
    result = a ^ b; /* 49 = 0011 0001 */
    printf("result = a ^ b: %d\n", result);
    result = ~a; /*-61 = 1100 0011 */
    printf("result = ~a: %d\n", result);
    result = a << 2; /* 240 = 1111 0000 */
    printf("result = a << 2: %d\n", result);
    result = a >> 2; /* 15 = 0000 1111 */
    printf("result = a >> 2: %d\n", result);
    return 0;
}

```

### 3.6 条件运算符

>条件运算符也称为三元运算符
>
>其格式为： 条件表达式 ? 表达式1 : 表达式2 
>
>三元运算符的执⾏过程是这样的：
>
>- ⾸先，程序会计算条件表达式的值 
>- 如果条件表达式的值为真（⾮0），那么程序会计算调⼤是1

例如：

```c
#include <stdio.h>
int main() {
 	int a = 10;
 	int b = 20;
 	int max = a > b ? a : b;
 	printf("最⼤的数是：%d\n", max);
 	return 0;
}
```

```c
#include <stdio.h>
int main() {
    int a = 10;
    int b = (a == 1) ? 20 : 30;
    printf("b is %d\n", b); // b is 30
    return 0;
}
```

### 3.7 自增自减运算符

> C语⾔中的⾃增（++）和⾃减（--）运算符⽤于增加或减少变量的值。这些运算符有前缀和后缀 两种形式，对应着不同的操作顺序。 
>
> - 前缀⾃增/⾃减：先进⾏⾃增/⾃减操作，然后再进⾏其他操作。例如，++a 或 --a。 
> - 后缀⾃增/⾃减：先进⾏其他操作，然后再进⾏⾃增/⾃减操作。例如，a++ 或 a--。

```c
int a = 10;
int b = ++a; // 先增加a的值，然后赋值给b。此时a和b都为11。
a = 10; // 重置a的值为10
b = a++; // 先将a的值赋给b，然后再增加a的值。此时a为11，b为10。
```

###3.8 逗号运算符

>逗号运算符在C语⾔中被⽤来链接两个或更多的独⽴的表达式，从⽽使它们能在⼀⾏内执⾏。逗号 运算符有两个主要的特点：
>
>1. 从左⾄右的顺序执⾏：逗号运算符的所有操作数都按从左到右的顺序进⾏计算。 
>2. 返回值：逗号运算符的返回值是最后⼀个表达式的值。 

让我们看⼀个简单的例⼦来更好地理解这个概念：

```c
#include <stdio.h>
int main() {
    int a, b;
    a = (b=4, b+2);
    printf("a 的值是 %d\n", a );
    return 0;
}
```

>在上述代码中，逗号运算符将两个表达式b=4和b+2链接在⼀起。⾸先，b=4被执⾏，然后执⾏ b+2，最后，b+2的结果被赋给变量a。因此，a的最终值为6。 请注意，虽然逗号运算符可以将多个表达式链接在⼀起，但过度使⽤可能会使代码难以理解和维 护。在编程时，最好尽可能地保持代码的清晰和简洁。

### 3.8 指针运算符

>在C语⾔中，我们主要有4个指针运算符，它们是：

 1*（解引⽤运算符）：这个运算符返回指针所指向的值。例如，如果p是⼀个指向整数的指针， 并且该整数的值是10，那么*p将返回10。

```c
int a = 10;
int *p = &a;
printf("%d\n", *p); // 输出: 10
```

&（取地址运算符）：这个运算符返回变量的内存地址如，如果a是⼀个整数，那么&a将 6.8 逗号运算符返回这个整数在内存中的地址。

```c
int a = 10;
printf("%p\n", &a); // 输出: a在内存中的地址
```

 ++和--（⾃增和⾃减运算符）：这些运算符⽤于改变指针的值，使其指向下⼀个或上⼀个内 存位置。如果p是⼀个指向整数的指针，并且整数占⽤4个字节，那么p++将使p指向内存中的 下⼀个整数，⽽p--将使p指向内存中的上⼀个整数。

```c
int arr[] = {10, 20, 30};
int *p = arr;
printf("%d\n", *p); // 输出: 10
p++;
printf("%d\n", *p); // 输出: 20
```

指针⽐较运算符：这些包括 ==、!=、<、>、<=、>=。它们可以⽤来⽐较两个指针的值（即它 们所指向的内存地址）。

```c
int a = 10, b = 20;
int *p1 = &a, *p2 = &b;
if (p1 != p2) {
 	printf("p1 and p2 point to different locations.\n");
}
```

### 3.10 sizeof运算符

> sizeof运算符是C语⾔中的⼀种单⽬运算符，⽤于获取⼀个特定类型或特定对象的⼤⼩（以字节为 单位）。其可以应⽤于任何数据类型，包括基本类型（如int、char、double等）、派⽣类型（如 数组、指针等）和⾃定义类型（如结构体、联合等）。 以下是sizeof运算符的⼀些使⽤示例：

```c
int main()
{
    int a;
    double b;
    char c[10];
 
 	printf("Size of int: %lu\n", sizeof(a)); // 输出: Size of int: 4
 	printf("Size of double: %lu\n", sizeof(b)); // 输出: Size of double:
8
 	printf("Size of char[10]: %lu\n", sizeof(c)); // 输出: Size of char[1
0]: 10
 
   return
```

> 在上述代码中，sizeof(a)返回变量a的⼤⼩（以字节为单位），sizeof(b)返回变量b的⼤⼩， sizeof(c)返回数组c的⼤⼩。 需要注意的是，sizeof运算符返回的是size_t类型的值，这是⼀种⽆符号整型数据类型，所以在 printf函数中应该使⽤%lu（代表⻓⽆符号整型）来格式化输出。 另外，你也可以使⽤sizeof运算符来获取⼀个类型的⼤⼩，⽽不仅仅是变量的⼤⼩。例如， sizeof(int)将返回int类型的⼤⼩，sizeof(double)将返回double类型的⼤⼩。

### 3.11 优先级

| 类别       | 运算符                              | 结合性   |
| ---------- | ----------------------------------- | -------- |
| 后缀       | () [] -> . ++ --                    | 从左到右 |
| 一元       | +-  ! ~ ++ -- (type)* & sizeof      | 从右到左 |
| 乘除       | \* / %                              | 从左到右 |
| 加减       | \+ -                                | 从左到右 |
| 移位       | << >>                               | 从左到右 |
| 关系       | < <= > >=                           | 从左到右 |
| 相等       | == !=                               | 从左到右 |
| 位与 AND   | &                                   | 从左到右 |
| 位异或 XOR | ^                                   | 从左到右 |
| 位或 OR    | \|                                  | 从左到右 |
| 逻辑与 AND | &&                                  | 从左到右 |
| 逻辑或 OR  | \|\|                                | 从左到右 |
| 条件       | ?:                                  | 从右到左 |
| 赋值       | = += -= *= /= %= >>= <<= &= ^=  \|= | 从右到左 |
| 逗号       | ，                                  | 从左到右 |

